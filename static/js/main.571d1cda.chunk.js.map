{"version":3,"sources":["componentes/Chat.js","images/plane.png","componentes/Map.js","App.js","reportWebVitals.js","index.js"],"names":["socket","io","path","Chat","name","getDate","today","Date","length","dd","String","padStart","mm","getMonth","yyyy","getFullYear","hh","getHours","min","getMinutes","ss","getSeconds","useState","message","setMessage","messages","setMessages","useEffect","on","obj","off","divRef","useRef","current","scrollIntoView","behavior","className","map","e","i","date","ref","onSubmit","preventDefault","emit","value","placeholder","onChange","target","planeIcon","Icon","iconUrl","plane","iconSize","Map","originDestinations","setOriginDestinations","flightsInfo","setFlightsInfo","trayectories","setTrayectories","gotFlightsInfo","setGotFlightsInfo","forEach","element","prev","origin","destination","code","position","getOriginLat","lat","toPrecision","getOriginLng","lng","id","MapContainer","center","zoom","style","height","TileLayer","attribution","url","Marker","icon","Popup","Polyline","positions","CircleMarker","color","radius","airline","seats","passengers","passenger","idx","age","toString","App","setName","registered","setRegistered","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.571d1cda.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"../App.css\";\nimport { io } from 'socket.io-client';\n\nlet socket = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {path: '/flights'});\n\nconst Chat = ({ name }) => {\n\n  const getDate = (...args) => {\n    var today = new Date();\n    if (args.length > 0) {\n      today = new Date(args[0]);\n    }\n    var dd = String(today.getDate()).padStart(2, '0');\n    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n    var yyyy = today.getFullYear();\n    var hh = String(today.getHours()).padStart(2, '0');\n    var min = String(today.getMinutes()).padStart(2, '0');\n    var ss = String(today.getSeconds()).padStart(2, '0');\n\n    today = dd + '/' + mm + '/' + yyyy + ' - ' + hh + ':' + min + ':' + ss;\n    return today;\n  }\n\n  const [message, setMessage] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n    socket.on(\"CHAT\", (obj) => {\n      setMessages([...messages, obj]);\n    });\n\n    return () => {\n      socket.off();\n    };\n  }, [messages]);\n\n  const divRef = useRef(null);\n  useEffect(() => {\n    divRef.current.scrollIntoView({ behavior: \"smooth\" });\n  });\n\n  const submit = (e) => {\n    e.preventDefault();\n    const obj = {\n      \"name\": name, \n      \"message\": message, \n      \"date\": getDate()\n    }\n    socket.emit(\"CHAT\", obj);\n    setMessage(\"\");\n  };\n\n  return (\n    <div className=\"chatContainer\">\n      <div className=\"chat\">\n        {messages.map((e, i) => (\n          <div key={i}>\n            <div>{getDate(e.date)}</div>\n            <div><b>{e.name}:</b> {e.message}</div>\n          </div>\n        ))}\n        <div ref={divRef}></div>\n      </div>\n      <form onSubmit={submit}>\n        <br></br>\n        <textarea\n          className=\"message\"\n          value={message}\n          placeholder=\"Escriba su mensaje...\"\n          onChange={(e) => {\n            setMessage(e.target.value)\n          }}\n        ></textarea>\n        <br></br>\n        <button>Enviar</button>\n      </form>\n    </div>\n  );\n};\n\nexport default Chat;","export default __webpack_public_path__ + \"static/media/plane.d237a902.png\";","import React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Polyline, CircleMarker, Popup } from 'react-leaflet';\nimport '../App.css';\nimport \"leaflet/dist/leaflet.css\";\nimport { Icon } from 'leaflet';\nimport plane from '../images/plane.png';\nimport { io } from 'socket.io-client';\n\n<head>\n  <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\"\n   integrity=\"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==\"\n   crossorigin=\"\"/>\n</head>\n\nlet socket = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {path: '/flights'});\n\nconst planeIcon = new Icon({\n  iconUrl: plane,\n  iconSize: [25, 25]\n});\n\n\nconst Map = () => {\n\n  const [originDestinations, setOriginDestinations] = useState([]);\n  const [flightsInfo, setFlightsInfo] = useState([]);\n  const [trayectories, setTrayectories] = useState([]);\n  const [gotFlightsInfo, setGotFlightsInfo] = useState(false);\n\n  socket.emit(\"FLIGHTS\");\n  useEffect(() => {\n    socket.on(\"FLIGHTS\", (obj) => {\n      if (!gotFlightsInfo) {\n        obj.forEach(element => {\n          setOriginDestinations(prev => [...prev, [element.origin, element.destination, element.code]]);\n          setFlightsInfo(prev => [...prev, element]);\n        });\n        setGotFlightsInfo(true);\n      };\n    });\n\n    return () => {\n      socket.off();\n    }\n  });\n\n  useEffect(() => {\n    socket.on(\"POSITION\", (obj) => {\n      setTrayectories(prev => ([...prev, obj]));\n      flightsInfo.forEach(element => {\n        if (element.code === obj.code) {\n          element.origin = obj.position;\n          setFlightsInfo(flightsInfo);\n        }\n      });\n    });\n\n    return () => {\n      socket.off();\n    }\n  });\n\n  const getOriginLat = (code) => {\n    let lat;\n    originDestinations.forEach(element => {\n      if (element[2] === code) {\n        lat = element[0][0].toPrecision(4);\n      };\n    });\n    return lat;\n  };\n\n  const getOriginLng = (code) => {\n    let lng;\n    originDestinations.forEach(element => {\n      if (element[2] === code) {\n        lng = element[0][1].toPrecision(4);\n      };\n    });\n    return lng;\n  };\n\n  return (\n    <div id=\"mapid\">\n      <MapContainer\n        center={[0, 0]}\n        zoom={2}\n        style={{height: \"60vh\"}}\n        >\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        {flightsInfo.map(element => {\n          return (\n            <Marker position={element.origin} icon={planeIcon}>\n              <Popup>{element.code}</Popup>\n            </Marker>\n          );\n        })}\n        {originDestinations.map(element => {\n          return (\n            <Polyline positions={[element[0], element[1]]} />\n          );\n        })};\n        {originDestinations.map(element => {\n          return (\n            <CircleMarker center={element[0]}/>\n          );\n        })}\n        {originDestinations.map(element => {\n          return (\n            <CircleMarker center={element[1]}/>\n          );\n        })}\n        {trayectories.map(element => {\n          return (\n            <CircleMarker\n            center={element.position}\n            color=\"red\"\n            radius={2}\n            />\n          );\n        })}\n      </MapContainer>\n      <div className=\"flights\">\n        {flightsInfo.map(element => {\n          return (\n            <div className=\"flightInfo\">\n              <h3>Vuelo {element.code}</h3>\n              <b>Aerolínea:</b> {element.airline}<br/>\n              <b>Origen:</b> [Lat, Lng] = [{getOriginLat(element.code)}, {getOriginLng(element.code)}]<br/>\n              <b>Destino:</b> [Lat, Lng] = [{element.destination[0].toPrecision(4)}, {element.destination[1].toPrecision(4)}]<br/>\n              <b>Avión:</b> {element.plane}<br/>\n              <b>Nº de asientos:</b> {element.seats}<br/>\n              <b>Pasajeros: </b> {element.passengers.map((passenger, idx) => (\n                <ul id=\"ulId\" key={idx.toString()}>{passenger.name} - {passenger.age} años</ul>\n              ))}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default Map;","import React, { useState } from \"react\";\nimport Chat from \"./componentes/Chat\";\nimport \"./App.css\";\nimport Map from './componentes/Map';\n\nfunction App() {\n  const [name, setName] = useState(\"\");\n  const [registered, setRegistered] = useState(false);\n\n  const register = (e) => {\n    e.preventDefault();\n    if (name !== \"\") {\n      setRegistered(true);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Bienvenid@ a la Tarea 3 de Clemente Ross</h1>\n      <div className=\"wrapper\">\n        <Map/>\n        {!registered && (\n          <form className=\"chatContainer\" onSubmit={register}>\n            <label>Escriba su nombre</label>\n            <input className=\"inputName\" value={name} onChange={(e) => setName(e.target.value)} />\n            <button>Ir al chat</button>\n          </form>\n        )}\n\n        {registered && (\n          <Chat name={name} />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}