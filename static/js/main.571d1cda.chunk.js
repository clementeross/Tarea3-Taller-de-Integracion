(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){},49:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(21),i=n.n(a),s=(n(49),n(2)),o=n(14),j=(n(25),n(23)),u=n(1),b=Object(j.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),l=function(e){var t=e.name,n=function(){var e=new Date;arguments.length>0&&(e=new Date(arguments.length<=0?void 0:arguments[0]));var t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),c=e.getFullYear(),r=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),i=String(e.getSeconds()).padStart(2,"0");return e=t+"/"+n+"/"+c+" - "+r+":"+a+":"+i},r=Object(c.useState)(""),a=Object(s.a)(r,2),i=a[0],j=a[1],l=Object(c.useState)([]),d=Object(s.a)(l,2),O=d[0],f=d[1];Object(c.useEffect)((function(){return b.on("CHAT",(function(e){f([].concat(Object(o.a)(O),[e]))})),function(){b.off()}}),[O]);var h=Object(c.useRef)(null);Object(c.useEffect)((function(){h.current.scrollIntoView({behavior:"smooth"})}));return Object(u.jsxs)("div",{className:"chatContainer",children:[Object(u.jsxs)("div",{className:"chat",children:[O.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:n(e.date)}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("b",{children:[e.name,":"]})," ",e.message]})]},t)})),Object(u.jsx)("div",{ref:h})]}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:t,message:i,date:n()};b.emit("CHAT",c),j("")},children:[Object(u.jsx)("br",{}),Object(u.jsx)("textarea",{className:"message",value:i,placeholder:"Escriba su mensaje...",onChange:function(e){j(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{children:"Enviar"})]})]})},d=n(85),O=n(89),f=n(86),h=n(87),x=n(88),g=n(90),p=(n(82),n(3)),m=n.p+"static/media/plane.d237a902.png",v=Object(j.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),S=new p.Icon({iconUrl:m,iconSize:[25,25]}),E=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(s.a)(a,2),j=i[0],b=i[1],l=Object(c.useState)([]),p=Object(s.a)(l,2),m=p[0],E=p[1],N=Object(c.useState)(!1),w=Object(s.a)(N,2),I=w[0],C=w[1];v.emit("FLIGHTS"),Object(c.useEffect)((function(){return v.on("FLIGHTS",(function(e){I||(e.forEach((function(e){r((function(t){return[].concat(Object(o.a)(t),[[e.origin,e.destination,e.code]])})),b((function(t){return[].concat(Object(o.a)(t),[e])}))})),C(!0))})),function(){v.off()}})),Object(c.useEffect)((function(){return v.on("POSITION",(function(e){E((function(t){return[].concat(Object(o.a)(t),[e])})),j.forEach((function(t){t.code===e.code&&(t.origin=e.position,b(j))}))})),function(){v.off()}}));var L=function(e){var t;return n.forEach((function(n){n[2]===e&&(t=n[0][0].toPrecision(4))})),t},P=function(e){var t;return n.forEach((function(n){n[2]===e&&(t=n[0][1].toPrecision(4))})),t};return Object(u.jsxs)("div",{id:"mapid",children:[Object(u.jsxs)(d.a,{center:[0,0],zoom:2,style:{height:"60vh"},children:[Object(u.jsx)(O.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),j.map((function(e){return Object(u.jsx)(f.a,{position:e.origin,icon:S,children:Object(u.jsx)(h.a,{children:e.code})})})),n.map((function(e){return Object(u.jsx)(x.a,{positions:[e[0],e[1]]})})),";",n.map((function(e){return Object(u.jsx)(g.a,{center:e[0]})})),n.map((function(e){return Object(u.jsx)(g.a,{center:e[1]})})),m.map((function(e){return Object(u.jsx)(g.a,{center:e.position,color:"red",radius:2})}))]}),Object(u.jsx)("div",{className:"flights",children:j.map((function(e){return Object(u.jsxs)("div",{className:"flightInfo",children:[Object(u.jsxs)("h3",{children:["Vuelo ",e.code]}),Object(u.jsx)("b",{children:"Aerol\xednea:"})," ",e.airline,Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Origen:"})," [Lat, Lng] = [",L(e.code),", ",P(e.code),"]",Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Destino:"})," [Lat, Lng] = [",e.destination[0].toPrecision(4),", ",e.destination[1].toPrecision(4),"]",Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Avi\xf3n:"})," ",e.plane,Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"N\xba de asientos:"})," ",e.seats,Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Pasajeros: "})," ",e.passengers.map((function(e,t){return Object(u.jsxs)("ul",{id:"ulId",children:[e.name," - ",e.age," a\xf1os"]},t.toString())}))]})}))})]})};var N=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(s.a)(a,2),o=i[0],j=i[1];return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h1",{children:"Bienvenid@ a la Tarea 3 de Clemente Ross"}),Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)(E,{}),!o&&Object(u.jsxs)("form",{className:"chatContainer",onSubmit:function(e){e.preventDefault(),""!==n&&j(!0)},children:[Object(u.jsx)("label",{children:"Escriba su nombre"}),Object(u.jsx)("input",{className:"inputName",value:n,onChange:function(e){return r(e.target.value)}}),Object(u.jsx)("button",{children:"Ir al chat"})]}),o&&Object(u.jsx)(l,{name:n})]})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(N,{})}),document.getElementById("root")),w()}},[[83,1,2]]]);
//# sourceMappingURL=main.571d1cda.chunk.js.map